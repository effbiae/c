#include"c.h"
#include<stdio.h>
#define O printf
#define g(s...) (O(s),fflush(stdout))
#define G(x) (g("G"),print(_r(x)),x)
#define A(b) $(!(b),g("!%s tx:%d ax:%d\n",#b,tx,ax);xx());
_U(xx,*(i2*)0)
Z0*m[]={"av;","['/\\",":+-*%&|<>=~.!@?#_^,$LMS...ERZ",";)]\n "},*P,c[128]={' '},*e[4]={"\\/'","scan","over","each"};_D(i0*,d,h(3,P(h==e[0][h],e[h+1]));"")
_Z(ini,k_(0,0);P=m[2];i(3,sd=m[i+1];W(*d)c[*d++]=m[0][i]))_D(i2,v,sd=P-1;W(*++d)P(*d==c,d-P-1);-2,cc)
_U(p0,in=strlen(s);Ur=tn(2,n);i2*p=k_(2,r);i(n,p[i]=*s++);r,ss)
F(p,i2*s=k_(2,a);Ur=tn(2,0);ii=0;h(x(a,nx),r=cat(r,s[h]=='%'?at(i++,rx):ti(s[h])));A(nx==i);r_(x);r_(a);r)
_f(pri,A(!ax&&tx==2);i2*p=k_(2,x);i(nx,O("%c",p[i]));O("\n");r_(x);0)
_U(pr,pri(p(p0(s),x)),ss,Ux)
_f(tra,Ur=tn(0,3);U*p=k_(2,r);i0*e="f\0g\0h";i(3,p[i]=p0(e+i*2));r)
main(int c,i0**v){ini();
 pr("f(%,%(%(x)));",tra(0));
 return 0;
}
